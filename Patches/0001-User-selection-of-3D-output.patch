From 650bfe272779ef04d6e98a6d01cbd1f8862d838c Mon Sep 17 00:00:00 2001
From: Mohammed Danish <shaan3@gmail.com>
Date: Wed, 5 Jul 2017 18:12:39 +0530
Subject: [PATCH 1/3] User selection of 3D output

---
 include/vlc_common.h |  7 +++++++
 src/libvlc-module.c  | 15 +++++++++++++++
 2 files changed, 22 insertions(+)

diff --git a/include/vlc_common.h b/include/vlc_common.h
index 94ab07e7a1..c4380e34d6 100644
--- a/include/vlc_common.h
+++ b/include/vlc_common.h
@@ -345,6 +345,13 @@ struct vlc_list_t
     vlc_value_t *p_values;
 };
 
+typedef enum STEREOSCOPIC_3D_FORMATS {
+    S3D_Auto,
+    S3D_LeftOnly,
+    S3D_RightOnly,
+    S3D_Stereo,
+} STEREOSCOPIC_3D_FORMATS;
+
 /*****************************************************************************
  * Error values (shouldn't be exposed)
  *****************************************************************************/
diff --git a/src/libvlc-module.c b/src/libvlc-module.c
index d3a446e832..6d6352c994 100644
--- a/src/libvlc-module.c
+++ b/src/libvlc-module.c
@@ -46,6 +46,18 @@
 static const char *const ppsz_snap_formats[] =
 { "png", "jpg", "tiff" };
 
+#define S3D_FORMAT_TEXT      N_("Stereo 3D file format")
+#define S3D_FORMAT_TEXT_LONGTEXT  N_("Set the 3D file format manually"\
+                                "Autodetect, Left Only, Right Only, Stereo")
+
+static const int sbs_formats[] = {
+    S3D_Auto, S3D_LeftOnly, S3D_RightOnly, S3D_Stereo,
+
+};
+static const char *const sbs_formats_text[] = {
+     N_("Auto-detect"), N_("Left Only"), N_("Right Only"), N_("Stereo"),
+};
+
 /*****************************************************************************
  * Configuration options for the core module. Each module will also separatly
  * define its own configuration options.
@@ -1546,6 +1558,9 @@ vlc_module_begin ()
 
     add_bool( "video-title-show", 1, VIDEO_TITLE_SHOW_TEXT,
               VIDEO_TITLE_SHOW_LONGTEXT, false )
+    add_integer ("s3d-output", S3D_Auto, S3D_FORMAT_TEXT, S3D_FORMAT_TEXT_LONGTEXT, false)
+        change_integer_list (sbs_formats, sbs_formats_text)
+
         change_safe()
     add_integer( "video-title-timeout", 5000, VIDEO_TITLE_TIMEOUT_TEXT,
                  VIDEO_TITLE_TIMEOUT_LONGTEXT, false )
-- 
2.12.2.windows.2

